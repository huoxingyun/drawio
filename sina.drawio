<mxfile host="app.diagrams.net" modified="2021-05-10T07:53:11.145Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.93 Safari/537.36" etag="8Y42B7CBlAlObUcHvV4h" version="14.6.6" type="github">
  <diagram id="73qnzFTmyiy0gJQ-XmEV" name="Page-1">
    <mxGraphModel dx="1903" dy="1273" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="8OZwkQij8053dfiXjXIb-1" value="&lt;font style=&quot;font-size: 16px&quot;&gt;wallet_go&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="320" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-5" value="&lt;font style=&quot;font-size: 16px&quot;&gt;cmd&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="160" y="200" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-36" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="8OZwkQij8053dfiXjXIb-6" target="8OZwkQij8053dfiXjXIb-35">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-6" value="&lt;font style=&quot;font-size: 16px&quot;&gt;pkg&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="160" y="360" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="8OZwkQij8053dfiXjXIb-9" target="8OZwkQij8053dfiXjXIb-30">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="520" y="100" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-9" value="&lt;font style=&quot;font-size: 16px&quot;&gt;core&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="360" y="80" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-24" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="8OZwkQij8053dfiXjXIb-10" target="8OZwkQij8053dfiXjXIb-29">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="520" y="180" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-10" value="&lt;font style=&quot;font-size: 16px&quot;&gt;daemon&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="360" y="160" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-26" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.005;entryY=0.38;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="8OZwkQij8053dfiXjXIb-11" target="8OZwkQij8053dfiXjXIb-27">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="520" y="260" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-11" value="&lt;font style=&quot;font-size: 16px&quot;&gt;grpc&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="360" y="240" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-32" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="8OZwkQij8053dfiXjXIb-12" target="8OZwkQij8053dfiXjXIb-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-12" value="&lt;font style=&quot;font-size: 16px&quot;&gt;remit&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="360" y="320" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="8OZwkQij8053dfiXjXIb-13" target="8OZwkQij8053dfiXjXIb-33">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-13" value="&lt;font style=&quot;font-size: 16px&quot;&gt;web&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="360" y="400" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-14" value="" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="8OZwkQij8053dfiXjXIb-5" target="8OZwkQij8053dfiXjXIb-9">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="360" y="350" as="sourcePoint" />
            <mxPoint x="410" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-15" value="" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="8OZwkQij8053dfiXjXIb-5" target="8OZwkQij8053dfiXjXIb-10">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="360" y="350" as="sourcePoint" />
            <mxPoint x="410" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-16" value="" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="8OZwkQij8053dfiXjXIb-5" target="8OZwkQij8053dfiXjXIb-11">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="360" y="350" as="sourcePoint" />
            <mxPoint x="410" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-17" value="" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="8OZwkQij8053dfiXjXIb-5" target="8OZwkQij8053dfiXjXIb-12">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="360" y="350" as="sourcePoint" />
            <mxPoint x="410" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-18" value="" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="8OZwkQij8053dfiXjXIb-5" target="8OZwkQij8053dfiXjXIb-13">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="360" y="350" as="sourcePoint" />
            <mxPoint x="410" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-19" value="" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="8OZwkQij8053dfiXjXIb-1" target="8OZwkQij8053dfiXjXIb-5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="360" y="350" as="sourcePoint" />
            <mxPoint x="410" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-20" value="" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="8OZwkQij8053dfiXjXIb-1" target="8OZwkQij8053dfiXjXIb-6">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="360" y="350" as="sourcePoint" />
            <mxPoint x="410" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-27" value="&lt;font style=&quot;font-size: 14px&quot;&gt;&lt;span&gt;1. 没有对外提供服务&lt;/span&gt;&lt;font style=&quot;font-size: 14px&quot;&gt;，作为输出储备&lt;br&gt;2. 暂时启动在10.13.0.26机器&lt;br&gt;3. 当作测试、本地抓数据使用&lt;/font&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=top;resizable=0;points=[];autosize=1;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="520" y="235" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-29" value="&lt;font style=&quot;font-size: 14px&quot;&gt;1. 打款&lt;br&gt;2. 运营数据定时任务&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=top;resizable=0;points=[];autosize=1;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="520" y="160" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-30" value="&lt;font style=&quot;font-size: 14px&quot;&gt;钱包API&amp;nbsp;底层SDK&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=top;resizable=0;points=[];autosize=1;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="520" y="90" width="130" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-31" value="打款服务（微博）" style="text;html=1;align=left;verticalAlign=top;resizable=0;points=[];autosize=1;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="520" y="330" width="110" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-33" value="&lt;font style=&quot;font-size: 14px&quot;&gt;钱包http服务&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=top;resizable=0;points=[];autosize=1;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="520" y="410" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-35" value="&lt;font style=&quot;font-size: 14px&quot;&gt;model、http等底层包&lt;br&gt;&lt;br&gt;cmd中所有功能均依赖pkg&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=top;resizable=0;points=[];autosize=1;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="180" y="460" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-39" value="&lt;span style=&quot;font-size: 16px&quot;&gt;quanzi_go&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="665" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-47" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=14;" edge="1" parent="1" source="8OZwkQij8053dfiXjXIb-40" target="8OZwkQij8053dfiXjXIb-46">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-40" value="&lt;span style=&quot;font-size: 16px&quot;&gt;model&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="160" y="585" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-54" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=14;" edge="1" parent="1" source="8OZwkQij8053dfiXjXIb-41" target="8OZwkQij8053dfiXjXIb-48">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-41" value="&lt;span style=&quot;font-size: 16px&quot;&gt;server&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="160" y="705" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-57" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=14;" edge="1" parent="1" source="8OZwkQij8053dfiXjXIb-42" target="8OZwkQij8053dfiXjXIb-56">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-42" value="&lt;span style=&quot;font-size: 16px&quot;&gt;tools&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="150" y="865" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-43" value="" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="8OZwkQij8053dfiXjXIb-39" target="8OZwkQij8053dfiXjXIb-40">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="410" y="765" as="sourcePoint" />
            <mxPoint x="460" y="715" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-44" value="" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="8OZwkQij8053dfiXjXIb-39" target="8OZwkQij8053dfiXjXIb-41">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="410" y="765" as="sourcePoint" />
            <mxPoint x="460" y="715" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-45" value="" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="8OZwkQij8053dfiXjXIb-39" target="8OZwkQij8053dfiXjXIb-42">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="410" y="765" as="sourcePoint" />
            <mxPoint x="460" y="715" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-46" value="MySQL底包" style="text;html=1;align=left;verticalAlign=top;resizable=0;points=[];autosize=1;strokeColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="320" y="595" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-48" value="monitor健康检测&lt;br&gt;&lt;br&gt;msgbox : 消息盒子存储逻辑抽象&lt;br&gt;&lt;br&gt;msghandler：社群通用行为处理&lt;br&gt;&lt;br&gt;msghandler_box：消息盒子业务逻辑&lt;br&gt;&lt;br&gt;msghandler_follow：社群通用关注体系&lt;br&gt;&lt;br&gt;msghandler_like：点赞行为处理" style="text;html=1;align=left;verticalAlign=top;resizable=0;points=[];autosize=1;strokeColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="310" y="665" width="260" height="190" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-56" value="daemon：follow_kafka | 消费媒体状态变更kafka消息&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;刷新关注该媒体用户的关注列表权重&lt;br&gt;&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;out_import | 外站导入（包括 鹰眼 热搜 coredata 等消息源的数据）&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;对于导入失败或者异常情况下的数据丢失，有一个补偿逻辑&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;可通过quanzi_bufa_task，手动刷入需要导入的key即可&lt;br&gt;&lt;br&gt;&lt;br&gt;工具包：split_table.go | 切表定时任务&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 有新表需要加入时修改该文件重新编译即可&lt;br&gt;&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; upload.sh | 部署服务时上传文件使用（暂时没有在用）&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 服务已经迁移到了k8s" style="text;html=1;align=left;verticalAlign=top;resizable=0;points=[];autosize=1;strokeColor=none;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="310" y="885" width="500" height="230" as="geometry" />
        </mxCell>
        <mxCell id="8OZwkQij8053dfiXjXIb-60" value="社群、钱包，模块功能说明" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=14;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="180" height="20" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
